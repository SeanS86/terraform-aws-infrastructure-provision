ubuntu@ip-172-18-3-234:~/cp_scripts$ sudo ./prepare-node.sh
+ echo 'Starting Node Preparation for Kubernetes...'
Starting Node Preparation for Kubernetes...
+ echo 'Updating package list and installing prerequisite packages...'
Updating package list and installing prerequisite packages...
+ sudo apt-get update
Hit:1 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy InRelease
Get:2 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB]
Get:3 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports InRelease [127 kB]
Get:4 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
Get:5 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [14.1 MB]
Get:6 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/universe Translation-en [5652 kB]
Get:7 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/universe amd64 c-n-f Metadata [286 kB]
Get:8 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [217 kB]
Get:9 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/multiverse Translation-en [112 kB]
Get:10 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/multiverse amd64 c-n-f Metadata [8372 B]
Get:11 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [2802 kB]
Get:12 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main Translation-en [443 kB]
Get:13 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [4157 kB]
Get:14 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/restricted Translation-en [753 kB]
Get:15 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1226 kB]
Get:16 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/universe Translation-en [304 kB]
Get:17 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 c-n-f Metadata [28.7 kB]
Get:18 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [59.5 kB]
Get:19 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/multiverse Translation-en [14.2 kB]
Get:20 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 c-n-f Metadata [592 B]
Get:21 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/main amd64 Packages [68.8 kB]
Get:22 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/main Translation-en [11.4 kB]
Get:23 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/main amd64 c-n-f Metadata [392 B]
Get:24 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/restricted amd64 c-n-f Metadata [116 B]
Get:25 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [30.0 kB]
Get:26 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/universe Translation-en [16.5 kB]
Get:27 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/universe amd64 c-n-f Metadata [672 B]
Get:28 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/multiverse amd64 c-n-f Metadata [116 B]
Get:29 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [2557 kB]
Get:30 http://security.ubuntu.com/ubuntu jammy-security/main Translation-en [379 kB]
Get:31 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [4013 kB]
Get:32 http://security.ubuntu.com/ubuntu jammy-security/restricted Translation-en [729 kB]
Get:33 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [993 kB]
Get:34 http://security.ubuntu.com/ubuntu jammy-security/universe Translation-en [217 kB]
Get:35 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 c-n-f Metadata [21.7 kB]
Get:36 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [40.3 kB]
Get:37 http://security.ubuntu.com/ubuntu jammy-security/multiverse Translation-en [8908 B]
Get:38 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 c-n-f Metadata [368 B]
Fetched 39.6 MB in 6s (6564 kB/s)
Reading package lists... Done
+ sudo apt-get install -y apt-transport-https ca-certificates curl software-properties-common gnupg conntrack
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
ca-certificates is already the newest version (20240203~22.04.1).
ca-certificates set to manually installed.
curl is already the newest version (7.81.0-1ubuntu1.20).
curl set to manually installed.
software-properties-common is already the newest version (0.99.22.9).
software-properties-common set to manually installed.
The following additional packages will be installed:
  dirmngr gnupg-l10n gnupg-utils gpg gpg-agent gpg-wks-client gpg-wks-server gpgconf gpgsm gpgv
Suggested packages:
  pinentry-gnome3 tor parcimonie xloadimage scdaemon
The following NEW packages will be installed:
  apt-transport-https conntrack
The following packages will be upgraded:
  dirmngr gnupg gnupg-l10n gnupg-utils gpg gpg-agent gpg-wks-client gpg-wks-server gpgconf gpgsm gpgv
11 upgraded, 2 newly installed, 0 to remove and 82 not upgraded.
Need to get 2283 kB of archives.
After this operation, 274 kB of additional disk space will be used.
Get:1 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gpg-wks-client amd64 2.2.27-3ubuntu2.4 [62.7 kB]
Get:2 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 dirmngr amd64 2.2.27-3ubuntu2.4 [293 kB]
Get:3 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gpg-wks-server amd64 2.2.27-3ubuntu2.4 [57.5 kB]
Get:4 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gnupg-utils amd64 2.2.27-3ubuntu2.4 [309 kB]
Get:5 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gpg-agent amd64 2.2.27-3ubuntu2.4 [209 kB]
Get:6 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gpg amd64 2.2.27-3ubuntu2.4 [518 kB]
Get:7 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gpgconf amd64 2.2.27-3ubuntu2.4 [94.5 kB]
Get:8 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gnupg-l10n all 2.2.27-3ubuntu2.4 [54.7 kB]
Get:9 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gnupg all 2.2.27-3ubuntu2.4 [315 kB]
Get:10 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gpgsm amd64 2.2.27-3ubuntu2.4 [197 kB]
Get:11 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gpgv amd64 2.2.27-3ubuntu2.4 [137 kB]
Get:12 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 apt-transport-https all 2.4.14 [1510 B]
Get:13 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 conntrack amd64 1:1.4.6-2build2 [33.5 kB]
Fetched 2283 kB in 0s (51.0 MB/s)
(Reading database ... 65960 files and directories currently installed.)
Preparing to unpack .../00-gpg-wks-client_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gpg-wks-client (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../01-dirmngr_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking dirmngr (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../02-gpg-wks-server_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gpg-wks-server (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../03-gnupg-utils_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gnupg-utils (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../04-gpg-agent_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gpg-agent (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../05-gpg_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gpg (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../06-gpgconf_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gpgconf (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../07-gnupg-l10n_2.2.27-3ubuntu2.4_all.deb ...
Unpacking gnupg-l10n (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../08-gnupg_2.2.27-3ubuntu2.4_all.deb ...
Unpacking gnupg (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../09-gpgsm_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gpgsm (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Preparing to unpack .../10-gpgv_2.2.27-3ubuntu2.4_amd64.deb ...
Unpacking gpgv (2.2.27-3ubuntu2.4) over (2.2.27-3ubuntu2.3) ...
Setting up gpgv (2.2.27-3ubuntu2.4) ...
Selecting previously unselected package apt-transport-https.
(Reading database ... 65960 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.4.14_all.deb ...
Unpacking apt-transport-https (2.4.14) ...
Selecting previously unselected package conntrack.
Preparing to unpack .../conntrack_1%3a1.4.6-2build2_amd64.deb ...
Unpacking conntrack (1:1.4.6-2build2) ...
Setting up apt-transport-https (2.4.14) ...
Setting up conntrack (1:1.4.6-2build2) ...
Setting up gnupg-l10n (2.2.27-3ubuntu2.4) ...
Setting up gpgconf (2.2.27-3ubuntu2.4) ...
Setting up gpg (2.2.27-3ubuntu2.4) ...
Setting up gnupg-utils (2.2.27-3ubuntu2.4) ...
Setting up gpg-agent (2.2.27-3ubuntu2.4) ...
Setting up gpgsm (2.2.27-3ubuntu2.4) ...
Setting up dirmngr (2.2.27-3ubuntu2.4) ...
Setting up gpg-wks-server (2.2.27-3ubuntu2.4) ...
Setting up gpg-wks-client (2.2.27-3ubuntu2.4) ...
Setting up gnupg (2.2.27-3ubuntu2.4) ...
Processing triggers for man-db (2.10.2-1) ...
Processing triggers for install-info (6.8-4build1) ...
Scanning processes...
Scanning linux images...

Running kernel seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
+ echo 'Disabling swap...'
Disabling swap...
+ sudo swapoff -a
++ grep -c swap /etc/fstab
+ '[' 0 -gt 0 ']'
+ echo 'No swap entry found in /etc/fstab or already commented.'
No swap entry found in /etc/fstab or already commented.
+ echo 'Configuring kernel modules (overlay, br_netfilter)...'
Configuring kernel modules (overlay, br_netfilter)...
+ cat
+ sudo tee /etc/modules-load.d/k8s.conf
overlay
br_netfilter
+ sudo modprobe overlay
+ sudo modprobe br_netfilter
+ echo 'Configuring sysctl parameters for Kubernetes networking...'
Configuring sysctl parameters for Kubernetes networking...
+ cat
+ sudo tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward                 = 1
+ sudo sysctl --system
* Applying /etc/sysctl.d/10-console-messages.conf ...
kernel.printk = 4 4 1 7
* Applying /etc/sysctl.d/10-ipv6-privacy.conf ...
net.ipv6.conf.all.use_tempaddr = 2
net.ipv6.conf.default.use_tempaddr = 2
* Applying /etc/sysctl.d/10-kernel-hardening.conf ...
kernel.kptr_restrict = 1
* Applying /etc/sysctl.d/10-magic-sysrq.conf ...
kernel.sysrq = 176
* Applying /etc/sysctl.d/10-network-security.conf ...
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2
* Applying /etc/sysctl.d/10-ptrace.conf ...
kernel.yama.ptrace_scope = 1
* Applying /etc/sysctl.d/10-zeropage.conf ...
vm.mmap_min_addr = 65536
* Applying /etc/sysctl.d/50-cloudimg-settings.conf ...
net.ipv4.neigh.default.gc_thresh2 = 15360
net.ipv4.neigh.default.gc_thresh3 = 16384
net.netfilter.nf_conntrack_max = 1048576
* Applying /usr/lib/sysctl.d/50-default.conf ...
kernel.core_uses_pid = 1
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.default.accept_source_route = 0
sysctl: setting key "net.ipv4.conf.all.accept_source_route": Invalid argument
net.ipv4.conf.default.promote_secondaries = 1
sysctl: setting key "net.ipv4.conf.all.promote_secondaries": Invalid argument
net.ipv4.ping_group_range = 0 2147483647
net.core.default_qdisc = fq_codel
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
fs.protected_regular = 1
fs.protected_fifos = 1
* Applying /usr/lib/sysctl.d/50-pid-max.conf ...
kernel.pid_max = 4194304
* Applying /etc/sysctl.d/99-cloudimg-ipv6.conf ...
net.ipv6.conf.all.use_tempaddr = 0
net.ipv6.conf.default.use_tempaddr = 0
* Applying /usr/lib/sysctl.d/99-protect-links.conf ...
fs.protected_fifos = 1
fs.protected_hardlinks = 1
fs.protected_regular = 2
fs.protected_symlinks = 1
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/k8s.conf ...
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward = 1
* Applying /etc/sysctl.conf ...
+ echo 'Kernel parameters applied.'
Kernel parameters applied.
+ echo 'Installing containerd...'
Installing containerd...
+ sudo install -m 0755 -d /etc/apt/keyrings
+ curl -fsSL https://download.docker.com/linux/ubuntu/gpg
+ sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
+ sudo chmod a+r /etc/apt/keyrings/docker.gpg
+ sudo tee /etc/apt/sources.list.d/docker.list
++ dpkg --print-architecture
++ . /etc/os-release
+++ PRETTY_NAME='Ubuntu 22.04.5 LTS'
+++ NAME=Ubuntu
+++ VERSION_ID=22.04
+++ VERSION='22.04.5 LTS (Jammy Jellyfish)'
+++ VERSION_CODENAME=jammy
+++ ID=ubuntu
+++ ID_LIKE=debian
+++ HOME_URL=https://www.ubuntu.com/
+++ SUPPORT_URL=https://help.ubuntu.com/
+++ BUG_REPORT_URL=https://bugs.launchpad.net/ubuntu/
+++ PRIVACY_POLICY_URL=https://www.ubuntu.com/legal/terms-and-policies/privacy-policy
+++ UBUNTU_CODENAME=jammy
++ echo jammy
+ echo 'deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu   jammy stable'
+ sudo apt-get update
Hit:1 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://security.ubuntu.com/ubuntu jammy-security InRelease
Get:5 https://download.docker.com/linux/ubuntu jammy InRelease [48.8 kB]
Get:6 https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages [54.4 kB]
Fetched 103 kB in 1s (203 kB/s)
Reading package lists... Done
+ sudo apt-get install -y containerd.io
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following NEW packages will be installed:
  containerd.io
0 upgraded, 1 newly installed, 0 to remove and 82 not upgraded.
Need to get 30.5 MB of archives.
After this operation, 125 MB of additional disk space will be used.
Get:1 https://download.docker.com/linux/ubuntu jammy/stable amd64 containerd.io amd64 1.7.27-1 [30.5 MB]
Fetched 30.5 MB in 0s (76.3 MB/s)
Selecting previously unselected package containerd.io.
(Reading database ... 65969 files and directories currently installed.)
Preparing to unpack .../containerd.io_1.7.27-1_amd64.deb ...
Unpacking containerd.io (1.7.27-1) ...
Setting up containerd.io (1.7.27-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
Processing triggers for man-db (2.10.2-1) ...
Scanning processes...
Scanning linux images...

Running kernel seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
+ echo 'Configuring containerd to use systemd cgroup driver...'
Configuring containerd to use systemd cgroup driver...
+ sudo mkdir -p /etc/containerd
+ containerd config default
+ sudo tee /etc/containerd/config.toml
+ sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/g' /etc/containerd/config.toml
+ sudo systemctl restart containerd
+ sudo systemctl enable containerd
+ echo 'Containerd installed and configured.'
Containerd installed and configured.
+ echo 'Installing Kubernetes components (kubeadm, kubelet, kubectl)...'
Installing Kubernetes components (kubeadm, kubelet, kubectl)...
+ K8S_MINOR_VERSION=v1.29
+ K8S_FULL_VERSION=1.29.1-1.1
+ curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.29/deb/Release.key
+ sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg
+ echo 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /'
+ sudo tee /etc/apt/sources.list.d/kubernetes.list
deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /
+ sudo apt-get update
Hit:1 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:6 http://security.ubuntu.com/ubuntu jammy-security InRelease
Get:5 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.29/deb  InRelease [1192 B]
Get:7 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.29/deb  Packages [21.3 kB]
Fetched 22.5 kB in 1s (33.4 kB/s)
Reading package lists... Done
+ sudo apt-get install -y kubelet=1.29.1-1.1 kubeadm=1.29.1-1.1 kubectl=1.29.1-1.1
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  cri-tools ebtables kubernetes-cni socat
The following NEW packages will be installed:
  cri-tools ebtables kubeadm kubectl kubelet kubernetes-cni socat
0 upgraded, 7 newly installed, 0 to remove and 82 not upgraded.
Need to get 92.3 MB of archives.
After this operation, 345 MB of additional disk space will be used.
Get:1 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 ebtables amd64 2.0.11-4build2 [84.9 kB]
Get:2 http://eu-west-1.ec2.archive.ubuntu.com/ubuntu jammy/main amd64 socat amd64 1.7.4.1-3ubuntu4 [349 kB]
Get:3 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.29/deb  cri-tools 1.29.0-1.1 [20.1 MB]
Get:4 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.29/deb  kubernetes-cni 1.3.0-1.1 [31.4 MB]
Get:5 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.29/deb  kubelet 1.29.1-1.1 [19.8 MB]
Get:6 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.29/deb  kubectl 1.29.1-1.1 [10.5 MB]
Get:7 https://prod-cdn.packages.k8s.io/repositories/isv:/kubernetes:/core:/stable:/v1.29/deb  kubeadm 1.29.1-1.1 [10.1 MB]
Fetched 92.3 MB in 1s (76.5 MB/s)
Selecting previously unselected package cri-tools.
(Reading database ... 65985 files and directories currently installed.)
Preparing to unpack .../0-cri-tools_1.29.0-1.1_amd64.deb ...
Unpacking cri-tools (1.29.0-1.1) ...
Selecting previously unselected package ebtables.
Preparing to unpack .../1-ebtables_2.0.11-4build2_amd64.deb ...
Unpacking ebtables (2.0.11-4build2) ...
Selecting previously unselected package kubernetes-cni.
Preparing to unpack .../2-kubernetes-cni_1.3.0-1.1_amd64.deb ...
Unpacking kubernetes-cni (1.3.0-1.1) ...
Selecting previously unselected package socat.
Preparing to unpack .../3-socat_1.7.4.1-3ubuntu4_amd64.deb ...
Unpacking socat (1.7.4.1-3ubuntu4) ...
Selecting previously unselected package kubelet.
Preparing to unpack .../4-kubelet_1.29.1-1.1_amd64.deb ...
Unpacking kubelet (1.29.1-1.1) ...
Selecting previously unselected package kubectl.
Preparing to unpack .../5-kubectl_1.29.1-1.1_amd64.deb ...
Unpacking kubectl (1.29.1-1.1) ...
Selecting previously unselected package kubeadm.
Preparing to unpack .../6-kubeadm_1.29.1-1.1_amd64.deb ...
Unpacking kubeadm (1.29.1-1.1) ...
Setting up kubectl (1.29.1-1.1) ...
Setting up ebtables (2.0.11-4build2) ...
Setting up socat (1.7.4.1-3ubuntu4) ...
Setting up cri-tools (1.29.0-1.1) ...
Setting up kubernetes-cni (1.3.0-1.1) ...
Setting up kubelet (1.29.1-1.1) ...
Setting up kubeadm (1.29.1-1.1) ...
Processing triggers for man-db (2.10.2-1) ...
Scanning processes...
Scanning linux images...

Running kernel seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
+ sudo apt-mark hold kubelet kubeadm kubectl
kubelet set on hold.
kubeadm set on hold.
kubectl set on hold.
+ echo 'Kubernetes components (kubelet, kubeadm, kubectl) version 1.29.1-1.1 installed and held.'
Kubernetes components (kubelet, kubeadm, kubectl) version 1.29.1-1.1 installed and held.
+ sudo systemctl enable --now kubelet
+ echo 'kubelet service enabled and started.'
kubelet service enabled and started.
+ echo 'Node Preparation Complete.'
Node Preparation Complete.
+ echo 'Consider rebooting the node if you encounter issues, though often not strictly necessary.'
Consider rebooting the node if you encounter issues, though often not strictly necessary.
